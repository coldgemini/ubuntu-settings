if _BASHRC_WAS_RUN 2>/dev/null; then
    :;
else    # Stuff that only needs to run the first time we source .bashrc.
        # Useful to allow re-sourcing new changes, without breaking/changing things in this section
    alias _BASHRC_WAS_RUN=true
    # ... continued ...
fi

# Last mod time of a file or files
get_file_timestamp () {
    ls -1 --time-style=+%s -l  "$@" | cut -f6 -d" "
}

# Make sure our version of the .bashrc file is up-to-date, or reload it.
chk_bashrc_timestamp () {
	if [[ "$_BASHRC_TIMESTAMP" -lt "$(get_file_timestamp $(readlink -f $HOME/.bashrc.user))" ]]; then
        echo >&2 "Reloading .bashrc.user..."
        . ~/.bashrc.user
    fi
}
_BASHRC_TIMESTAMP=$(date +%s)

prompt_cmd () {
    chk_bashrc_timestamp
}
PROMPT_COMMAND=prompt_cmd

# some ls aliases
#alias ll='ls -alF'
#alias la='ls -A'
#alias l='ls -CF'

alias bashrcuser='source ~/.bashrc.user'
export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH
export LD_LIBRARY_PATH=/usr/local/cuda-8.0/lib64:$LD_LIBRARY_PATH
export PATH=/usr/local/cuda/bin:$PATH

export WORKON_HOME=~/Envs
VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3
source /home/$USER/.local/bin/virtualenvwrapper.sh

export CAFFE_ROOT=/home/$USER/Workbench/caffe
#export PYTHONPATH
alias addpycaffe='export PYTHONPATH=$CAFFE_ROOT/python:$PYTHONPATH'
alias py3path='export PYTHONPATH=/home/$USER/.local/lib/python3.5/site-packages:$PYTHONPATH'
alias py2path='export PYTHONPATH=/home/$USER/.local/lib/python2.7/site-packages:$PYTHONPATH'
alias matlab='/home/$USER/MATLAB/R2017b/bin/matlab'
alias matlabnojvm='/home/$USER/MATLAB/R2017b/bin/matlab -nojvm -nosplash'
alias matlabnodisplay='/home/$USER/MATLAB/R2017b/bin/matlab -nodisplay -nosplash'
alias matlabwin='/home/$USER/MATLAB/R2017b/bin/matlab'
alias vsnotes='code /home/$USER/Documents/Notes/deepsight'
export PYTHONPATH=/home/$USER/Workbench/caffe2/build:$PYTHONPATH
export DETECTRON=/home/$USER/Workbench/Detectron
alias server1='ssh -Y xiangyong@dsdp001'
alias server2='ssh -Y xiangyong@dsdp002'
alias server3='ssh -Y gemini@dsdp003'
alias server4='ssh -Y xiang@192.168.1.127'
alias connectnfs='sudo mount -t nfs -o rw,soft,timeo=30,retry=3 192.168.1.104:/var/storage/nfsroot ~/mnt/nfs'
export PYTHONPATH=/home/$USER/Workbench/keras-retinanet-py3:$PYTHONPATH
alias dataprocessing='cd /home/$USER/Workbench/Data-Processing'
alias gonotes='cd /home/$USER/Documents/Notes/deepsight'
export CALTECHCONV=/home/xiang/Data/caltech-pedestrian-dataset-converter
export KITTI_TOOLS=/home/xiang/Data/KITTI_SSD/data/KITTI
export PYTHONPATH=/home/xiang/Data/cocoapi/PythonAPI.maxDet:$PYTHONPATH
alias joblog='code -n /home/xiang/Documents/joblog.md'
export NCNN=/home/xiang/Workbench/ncnn
export QQFileRecv="/home/xiang/.wine/drive_c/Program Files/QQ/Users/2596998852/FileRecv"
export ANDROID_NDK=/home/xiang/Workbench/android-ndk-r15c
export PATH=/home/xiang/Workbench/arm-eabi-4.6/bin:$PATH
export ARCH=arm
export CROSS_COMPILE=/home/xiang/Workbench/arm-eabi-4.6/bin/arm-eabi-
alias add-arm-runtime='export LD_LIBRARY_PATH=/home/xiang/Workbench/linaro/latest-7/runtime-gcc-linaro-7.2.1-2017.11-arm-linux-gnueabihf/lib/arm-linux-gnueabihf:/home/xiang/Workbench/linaro/latest-7/runtime-gcc-linaro-7.2.1-2017.11-arm-linux-gnueabihf/usr/lib/arm-linux-gnueabihf:$LD_LIBRARY_PATH'
export OPENCV_ARM=/home/xiang/Downloads/tmp/opencv-3.3.1/platforms/linux/build
alias gpic=gpicview
alias netease-cloud-music=/home/xiang/apps/netease-cloud-music/usr/bin/netease-cloud-music
alias addssdpycaffe='export PYTHONPATH=/home/xiang/Workbench/caffe-ssd/build/install/python:$PYTHONPATH'
alias cpxclip='xclip -selection -c'
alias boostnote=/home/xiang/apps/boostnote/usr/share/boostnote/Boostnote
alias caffe2ncnn=/home/xiang/Workbench/ncnn/build-x86_64/tools/caffe/caffe2ncnn
export LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH
#export LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4:/usr/lib/x86_64-linux-gnu/libopencv_imgproc.so.2.4:/usr/lib/x86_64-linux-gnu/libopencv_core.so.2.4:/usr/lib/x86_64-linux-gnu/libstdc++.so.6:/usr/lib/x86_64-linux-gnu/libfreetype.so.6
alias aria2cserver='aria2c --conf-path ../apps/aria2.conf'
alias envmatcaffe='source /home/xiang/Documents/Notes/deepsight/matcaffe_env.sh'
alias rk3399='ssh -Y xiang@rk3399'
alias rk3288='ssh -Y xiang@rk3288'
alias NUC='ssh -Y xiang@NUC'
alias dck=docker
alias nautilus='nautilus --no-desktop'

#unset http_proxy
#unset https_proxy
alias dirnums='du -a | cut -d/ -f2 | sort | uniq -c | sort -nr'
export pgscript=/home/xiang/Documents/Notes/deepsight/python/PG

#export bashrc_user_testno=$(stat -c %Y ~/.bashrc.user)
#export PROMPT_COMMAND='test $(stat -c %Y ~/.bashrc.user) -ne $bashrc_user_testno && source ~/.bashrc'

#echo 'sourced ~/.bashrc.user'  
alias todo='~/.todo.sh'
alias td='~/.todo.sh'
export VIMRUNTIMEDIR=/usr/local/share/vim/vim80
alias vim=/home/xiang/.local/bin/vim
alias vimdiff=/home/xiang/.local/bin/vimdiff
alias view=/home/xiang/.local/bin/view
alias gvim=/home/xiang/.local/bin/gvim
alias gvimdiff=/home/xiang/.local/bin/gvimdiff
alias gview=/home/xiang/.local/bin/gview
alias gimp='flatpak run org.gimp.GIMP'

alias sudo='sudo '
# source /usr/share/autojump/autojump.zsh
alias dfh='df -h'
alias gdf='git diff'
alias gst='git status'
alias gps='git push'
alias gpl='git pull'
alias gcm='git commit -a'
alias gco='git checkout'
alias gbr='git branch -a'
alias grs='git reset'
alias gcf='git config --global'
alias gcl='git clone'
alias gad='git add'
alias gap='git config --global http.proxy=socks5://192.168.1.51:3333'
alias gdp='git config --global --unset http.proxy'
